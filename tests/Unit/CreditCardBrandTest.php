<?php

namespace Tests\Unit;

use PHPUnit\Framework\TestCase;

class CreditCardBrandTest extends TestCase {

    /**
     * Test find brand by number
     */
    public function testFindBrandByCredidCardNumber() {
         /**
         * Names are based on Braspag Provider
         * @see modules/woocommerce/includes/class-wc-checkout-braspag-providers.php
         *
         * Credit cards are from internet
         * @link https://docs.adyen.com/development-resources/test-cards/test-card-numbers#credit-and-debit-cards
         * @link https://gist.github.com/claudiosanches/26d9668f21dbdc787472
         */
        $tests = array(
            'Visa'       => array(
                '4988 4388 4388 4305',
                '4166 6766 6766 6746',
                '4646 4646 4646 4644',
                '4000 6200 0000 0007',
                '4000 0600 0000 0006',
                '4293 1891 0000 0008',
                '4988 0800 0000 0000',
                '4111 1111 1111 1111',
                '4444 3333 2222 1111',
                '4001 5900 0000 0001',
                '4000 1800 0000 0002',
                '4000 0200 0000 0000',
                '4000 1600 0000 0004',
                '4002 6900 0000 0008',
                '4400 0000 0000 0008',
                '4484 6000 0000 0004',
                '4607 0000 0000 0009',
                '4977 9494 9494 9497',
                '4000 6400 0000 0005',
                '4003 5500 0000 0003',
                '4000 7600 0000 0001',
                '4017 3400 0000 0003',
                '4005 5190 0000 0006',
                '4131 8400 0000 0003',
                '4035 5010 0000 0008',
                '4151 5000 0000 0008',
                '4571 0000 0000 0001',
                '4199 3500 0000 0002',
            ),
            'Master' => array(
                '5101 1800 0000 0007',
                '2222 4000 7000 0005',
                '5100 2900 2900 2909',
                '5555 3412 4444 1115',
                '5577 0000 5577 0004',
                '5136 3333 3333 3335',
                '5585 5585 5585 5583',
                '5555 4444 3333 1111',
                '2222 4107 4036 0010',
                '5555 5555 5555 4444',
                '2222 4107 0000 0002',
                '2222 4000 1000 0008',
                '2223 0000 4841 0010',
                '2222 4000 6000 0007',
                '2223 5204 4356 0010',
                '5500 0000 0000 0004',
                '2222 4000 3000 0004',
                '6771 7980 2500 0004',
                '5100 0600 0000 0002',
                '5100 7050 0000 0002',
                '5103 2219 1119 9245',
                '5424 0000 0000 0015',
                '2222 4000 5000 0009',
                '5106 0400 0000 0008',
            ),
            'Amex' => array(
                '3700 0000 0100 018',
                '3700 0000 0000 002',
                '3714 4963 5398 431',
                '3782 8224 6310 005',
            ),
            'Diners' => array(
                '3600 6666 3333 44',
                '3607 0500 0010 20',
                '3056 9309 0259 04',
                '3852 0000 0232 37',

            ),
            'Discover' => array(
                '6011 6011 6011 6611',
                '6445 6445 6445 6445',
                '6011 1111 1111 1117',
            ),
            'Elo' => array(
                '5066 9911 1111 1118',
                '6362 9700 0045 7013',
            ),
            'Hipercard' => array(
                '6062 8288 8866 6688',
                '6062 8256 2425 4001',
            ),
            'Jcb' => array(
                '3569 9900 1009 5841',
            ),
            'Aura' => array(
                '5078 6018 7000 0127 985',
                '5078 6018 0000 3247 449',
            ),
        );

        foreach ( $tests as $brand => $cards ) {
            foreach ( $cards as $card ) {
                $this->assertEquals( $brand, \WC_Checkout_Braspag_Credit_Card_Brand::find_brand( $card ), $card . ' should be a ' . $brand );
            }
        }
    }
}
